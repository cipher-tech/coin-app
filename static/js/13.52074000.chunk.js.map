{"version":3,"sources":["pages/admin/depositRequest/depositRequest.jsx"],"names":["Container","styled","div","props","theme","colorLight","colorDark","font","large","colorSecondary","colorPrimary","xlarge","medium","connect","user","users","regionContext","useContext","ContextData","useState","showpopUpMessage","setShowPopUpMessage","popUpMessage","setPopUpMessage","isLoading","setIsLoading","error","setError","isModalActive","setIsModalActive","paymentOptions","setPaymentOptions","bitcoinAddress","amountInput","setAmountInput","state","amount","e","a","navigator","clipboard","writeText","isActive","className","role","aria-label","onClick","src","qrcode","alt","copy","buttonClass","buttonText","classname","wrapperClass","data","rules","required","minlength","submit","length","console","log","auth_token","JSON","parse","localStorage","getItem","userid","id","email","status","object","type","Axios","post","routes","api","usersDeposit","then","res","catch","setTimeout","name","updatedValue","value","placeHolder","icon","envelope","field","onChange","target","country","paymentMethods","map","item","i","key"],"mappings":"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","file":"static/js/13.52074000.chunk.js","sourcesContent":["import React, { useState, useContext } from 'react'\r\nimport envelope from \"../../../images/svgIcons/envelope.svg\"\r\n// import { ReactComponent as Icon } from \"../../../images/svgIcons/envelope.svg\"\r\nimport styled from 'styled-components'\r\nimport { StyledInput } from '../../../components/styledComponents'\r\n// import Button from '../../../components/button/button'\r\nimport Axios from 'axios'\r\nimport { connect } from 'react-redux'\r\nimport routes from '../../../navigation/routes'\r\nimport { PopUpMessage, Modal } from '../../../components'\r\nimport qrcode from \"../../../images/qrcode.png\"\r\nimport { FormValidator } from '../../../formValidator'\r\nimport { ValidationMessage } from '../../../validationMessage'\r\nimport { ContextData } from '../../../context/contextData'\r\n\r\n\r\nconst Container = styled.div`\r\n    grid-column: 2/-1;\r\n    display: grid;\r\n    /* grid-template-columns: 1fr; */\r\n    min-height: 100%;\r\n    min-width: 100%;\r\n    /* place-items: center; */\r\n    justify-items: center;\r\n    align-items: flex-start;\r\n    background: ${props => props.theme.colorLight};\r\n    border-radius: 2rem 0 0 2rem;\r\n    z-index: 30;\r\n    position: relative;\r\n    .modal__container{\r\n        place-items: center;\r\n        background: ${props => props.theme.colorLight};\r\n        padding: 2rem 3rem;\r\n        height: max-content;\r\n        align-self: center;\r\n        color: ${props => props.theme.colorDark};\r\n        text-align: center;\r\n        position: relative;\r\n        border-radius: 1rem;\r\n        display: grid;\r\n\r\n        .close{\r\n            justify-self: flex-end;\r\n            cursor: pointer;\r\n        }\r\n        img{\r\n            height: 20rem;\r\n            width: 20rem;\r\n        }\r\n        &--text{\r\n            padding: 1rem;\r\n        }\r\n        &-address{\r\n            font-size: ${props => props.theme.font.large};\r\n            color: ${props => props.theme.colorSecondary};\r\n        }\r\n    }\r\n    .title{   \r\n        justify-self: flex-start;\r\n        font-weight: 500;\r\n        color: ${props => props.theme.colorPrimary};\r\n        font-family: ProximaNovaSoftW03-Regular;\r\n        position: relative;\r\n        margin-top: 8rem;\r\n        &::after{\r\n          content: '';\r\n          position: absolute;\r\n          width: 120%;\r\n          height: .4rem;\r\n          bottom: 0;\r\n          left: 0;\r\n          background: ${props => props.theme.colorPrimary};\r\n        }\r\n      }\r\n    .deposit{\r\n        display: grid;\r\n        /* margin-top: 13rem; */\r\n        padding: 2rem ;\r\n        /* display: flex; */\r\n        align-self: center;\r\n        justify-items: center;\r\n        color: ${props => props.theme.colorDark};\r\n        /* height: 1rem; */\r\n        box-shadow: .2rem .4rem 10px rgba(0,0,0, .3),\r\n            -0.2rem -0.4rem 20px rgba(255,255,255, .3);\r\n        \r\n        &-header{\r\n            font-weight: 600;\r\n            font-size: ${props => props.theme.font.xlarge};\r\n            color: ${props => props.theme.colorPrimary};\r\n            justify-self: flex-start;\r\n            padding: 2rem;\r\n        }\r\n        &-form{\r\n            display: grid;\r\n            width: 90%;\r\n            justify-items: center;\r\n            \r\n            &__wrapper{\r\n                justify-items: initial;\r\n            }\r\n        }\r\n        .paymentOptions{\r\n            padding: 1rem 2rem;\r\n                margin: 1rem;\r\n                box-shadow: -0.2rem -0.4rem 20px rgba(255,255,255, .3),\r\n                    .2rem .4rem 10px rgba(0,0,0, .3);\r\n                background: none;\r\n                border-radius: .4rem;  \r\n                border: none;  \r\n                font-size: ${props => props.theme.font.medium};\r\n                color: ${props => props.theme.colorSecondary};\r\n                /* &:hover{\r\n                } */\r\n                &:focus{\r\n                    outline: none;\r\n                    /* color: ${props => props.theme.colorSecondary}; */\r\n                }\r\n        }\r\n        .summit{\r\n            margin: 0 2rem;\r\n        }\r\n    }\r\n`\r\nfunction DepositRequest(props) {\r\n    const regionContext = useContext(ContextData)\r\n    // const [depositValue, setDepositValue] = useState(\"\")\r\n    const [showpopUpMessage, setShowPopUpMessage] = useState(false)\r\n    const [popUpMessage, setPopUpMessage] = useState(null)\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [error, setError] = useState(false)\r\n    const [isModalActive, setIsModalActive] = useState(false)\r\n    const [paymentOptions, setPaymentOptions] = useState('bank')\r\n    const [bitcoinAddress] = useState(\"d763hei899o889hvy889yvreiohvo99e9jv8r98re8viu89h\")\r\n    const [amountInput, setAmountInput] = useState('bank')\r\n\r\n    // const updateFormValue = (name, value) => {\r\n    //     setDepositValue(value)\r\n    // }\r\n    const state = {\r\n        amount: amountInput,\r\n        paymentOptions: paymentOptions\r\n        // newPassword: \"\",\r\n        // slug: slug,\r\n    }\r\n    const modalRule = {\r\n        amount: { required: true, minlength: 2 },\r\n        // paymentOptions: { required: true },\r\n    }\r\n    const handleSubmit = (e) => {\r\n        if (state?.amount.length < 1) {\r\n            console.log(\"short\");\r\n\r\n            setError(!false)\r\n            setPopUpMessage(\"Must be at least 2 digits\")\r\n            setShowPopUpMessage(true)\r\n            return\r\n        }\r\n        setError(false)\r\n        const auth_token = JSON.parse(localStorage.getItem(\"userInfo\")).user.auth_token\r\n        const userid = JSON.parse(localStorage.getItem(\"userInfo\")).user.id\r\n        const email = JSON.parse(localStorage.getItem(\"userInfo\")).user.email\r\n        const status = JSON.parse(localStorage.getItem(\"userInfo\")).user.status\r\n        setIsLoading(true)\r\n        const object = {\r\n            id: userid,\r\n            type: paymentOptions,\r\n            email: email,\r\n            amount: +state?.amount\r\n        }\r\n        console.log(object);\r\n        if (status === \"verified\") {\r\n            Axios.post(`${routes.api.usersDeposit}?token=${auth_token}`, object)\r\n                .then(res => {\r\n                    setShowPopUpMessage(false)\r\n                    if (res.data.status === \"success\") {\r\n                        setPopUpMessage(res.data.data)\r\n                        setShowPopUpMessage(true)\r\n                        setIsLoading(!true)\r\n                        setIsModalActive(true)\r\n                        // setTimeout(() => {\r\n                        //     props.history.push(routes.admin.index)\r\n                        // }, 8000);\r\n                        return\r\n                    }\r\n\r\n                })\r\n                .catch(res => {\r\n                    setPopUpMessage(res.data.data)\r\n                    setError(true)\r\n                    setShowPopUpMessage(true)\r\n                    setIsLoading(!true)\r\n                })\r\n        } else {\r\n            setError(!false)\r\n            setPopUpMessage(\"You are unverified. Click on the verify link on the menu to verify your account and continue\")\r\n            setShowPopUpMessage(true)\r\n            setTimeout(() => {\r\n                setError(false)\r\n                setShowPopUpMessage(false)\r\n                setIsLoading(!true)\r\n            }, 8500)\r\n\r\n        }\r\n    }\r\n    // const updateAmountValue = (name, value) => {\r\n    //     state[name] = value\r\n    //     console.log(state);\r\n    // }\r\n    async function copy(e) {\r\n        navigator.clipboard.writeText(bitcoinAddress)\r\n    }\r\n    // let createImage = (file) => {\r\n    //     let reader = new FileReader();\r\n    //     reader.onload = (e) => {\r\n    //         return e.target.result\r\n    //     };\r\n    //     reader.readAsDataURL(file);\r\n    // }\r\n    return (\r\n        <Container>\r\n            <Modal isActive={isModalActive}>\r\n                <div className=\"modal__container\">\r\n                    <span role=\"img\" aria-label=\"img\" className=\"close\" onClick={() => setIsModalActive(false)}>\r\n                        ❌\r\n\r\n                        </span>\r\n                    <img src={qrcode} alt=\"\" />\r\n\r\n                    <p className=\"modal__container--text\">\r\n                        please pay exactly ${state.amount} amount into this address\r\n                    </p>\r\n\r\n                    <p className=\"modal__container-address\">\r\n                        d763hei899o889hvy889yvreiohvo99e9jv8r98re8viu89h\r\n                        <button onClick={() =>copy()}> copy</button>\r\n                    </p>\r\n                </div>\r\n            </Modal>\r\n            {/* <h1 className=\"title\">Deposit Requests</h1> */}\r\n            {showpopUpMessage ? <PopUpMessage error={error}> {popUpMessage} <span onClick={() => setShowPopUpMessage(false)}>✖</span> </PopUpMessage> : null}\r\n            <div className=\"deposit\">\r\n                <h3 className=\"deposit-header\">\r\n                    Deposit Form:\r\n                </h3>\r\n                <p className=\"deposit-text\">\r\n                    Enter your amount to deposit and payment method.\r\n\t\t\t\t</p>\r\n                <FormValidator buttonClass=\"summit\"\r\n                    buttonText={isLoading ? \"Loading...\" : \"Submit\"}\r\n                    classname=\"deposit-form\"\r\n                    wrapperClass=\"deposit-form__wrapper\"\r\n                    data={state} rules={modalRule}\r\n                    submit={handleSubmit}>\r\n                    <div className=\"\">\r\n\r\n                        {/* <StyledInput name=\"deposit\" label=\"\" updatedValue={setDepositValue}\r\n                            handleChange={updateFormValue} value={depositValue}\r\n                            placeHolder=\"Enter amount to Deposit\" type=\"number\" icon={envelope} /> */}\r\n\r\n                        {/* <br /> */}\r\n                        <StyledInput name=\"amount\" updatedValue={setAmountInput}\r\n                            value={state.amount}\r\n                            placeHolder=\"Enter amount to Deposit\" type=\"number\" icon={envelope} />\r\n                        <ValidationMessage field=\"amount\" />\r\n\r\n                        <select className=\"paymentOptions\" value={paymentOptions} onChange={(e) => setPaymentOptions(e.target.value)} name=\"paymentOptions\">\r\n                            {\r\n                                regionContext?.country?.paymentMethods?.map((item, i) => (\r\n                                    <option key={i} value={item.name}>\r\n                                        {item.name}\r\n                                    </option>\r\n                                ))\r\n                            }\r\n                        </select>\r\n                        <ValidationMessage field=\"paymentOptions\" />\r\n                    </div>\r\n\r\n                </FormValidator>\r\n                {/* <Button className=\"summit\" onClick={handleSubmit}>\r\n                    {isLoading ? \"Loading...\" : \"Request\"}\r\n                </Button> */}\r\n            </div>\r\n        </Container>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = ({ users }) => ({\r\n    user: users\r\n})\r\n\r\nexport default connect(mapStateToProps)(DepositRequest)"],"sourceRoot":""}