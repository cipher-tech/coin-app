{"version":3,"sources":["pages/masterAdmin/orders/orders.jsx"],"names":["Container","styled","div","props","theme","colorLight","breakPoints","bpSmall2","colorPrimary","font","large","colorSecondary","colorDark","xxlarge","medium","mapDispatchToProps","fetchAllhistory","fetchAllHistoryActionCreator","connect","allHistory","history","useState","fetchedHistory","setFetchedHistory","popUpMessage","setPopUpMessage","showpopUpMessage","setShowPopUpMessage","hasError","setHasError","useEffect","auth_token","Storage","get","user","Axios","routes","api","adminGetOrders","then","response","data","res","catch","error","columns","Header","id","Cell","row","getToggleRowExpandedProps","isExpanded","accessor","rowInfo","email","className","onClick","e","confirmTransaction","original","deleteOrder","post","adminDestroyOrder","action","status","adminConfirmTransaction","color","expandedComponent","style","fontSize","width","display","overflow","first_name","phone_no","amount","type","reference_id","Date","created_at","toDateString","image","href","getImage","handleVerifyClick","tableColumns"],"mappings":"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","file":"static/js/22.e50b088f.chunk.js","sourcesContent":["import React from 'react'\r\nimport styled from 'styled-components'\r\n// import rateImage from \"../../../images/rate.png\"\r\n// import Table from './table'\r\nimport Table from '../../../components/table/tablePagination'\r\nimport { connect } from 'react-redux'\r\nimport { useEffect } from 'react'\r\nimport Axios from 'axios'\r\nimport { useState } from 'react'\r\nimport routes from '../../../navigation/routes'\r\nimport { StyledButton, PopUpMessage, Storage } from '../../../components'\r\nimport { fetchAllHistoryActionCreator } from '../../../reduxStore'\r\n\r\n\r\nconst Container = styled.div`\r\n    grid-column: 2/-1;\r\n    display: grid;\r\n    min-height: 100%;\r\n    min-width: 100%;\r\n    align-items: flex-start;\r\n    background: ${props => props.theme.colorLight};\r\n    border-radius: 2rem 0 0 2rem;\r\n    z-index: 30;\r\n    .rate{\r\n\t\tgrid-column: 1/-1;\r\n\t\tdisplay: grid;\r\n\t\twidth: 100%;\r\n\t\tpadding: 3rem;\r\n\t\t/* place-items: center; */\r\n\t\tjustify-items: center;\r\n\t\talign-items: space-around;\r\n\t\tjustify-self: flex-start;\r\n\t\tposition: relative;\r\n\t\t@media only screen and (max-width: ${props => props.theme.breakPoints.bpSmall2}) {\r\n\t\t\tpadding: 3rem 0;\r\n\t\t}\r\n\t\t\r\n      &__title{   \r\n        justify-self: flex-start;\r\n        font-weight: 500;\r\n        color: ${props => props.theme.colorPrimary};\r\n        font-family: ProximaNovaSoftW03-Regular;\r\n        position: relative;\r\n\r\n        &::after{\r\n          content: '';\r\n          position: absolute;\r\n          width: 120%;\r\n          height: .4rem;\r\n          bottom: 0;\r\n          left: 0;\r\n          background: ${props => props.theme.colorPrimary};\r\n        }\r\n      }\r\n\t  .orders{\r\n\t\tpadding: 1rem 1.5rem;\r\n\t\t&-text{\r\n\t\t\tdisplay: flex;\r\n\t\t\tpadding: 1rem 1.5rem;\r\n\t\t\tfont-size: ${props => props.theme.font.large};\r\n\t\t\tfont-weight: 500;\r\n\t\t\tjustify-content: space-around;\r\n\t\t\tcolor: ${props => props.theme.colorSecondary};\r\n\t\t\t&__info{\r\n\t\t\t\tfont-size: ${props => props.theme.font.large};\r\n\t\t\t\tfont-weight: 300;\r\n\t\t\t\tcolor: ${props => props.theme.colorDark};\r\n\t\t\t}\r\n\t\t\t&__tranction{\r\n\t\t\t\tpadding: 2rem 2.5rem;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tfont-size: ${props => props.theme.font.xxlarge};\r\n\t\t\t\tfont-weight: 500;\r\n\t\t\t\tjustify-content: space-around;\r\n\t\t\t\tcolor: ${props => props.theme.colorSecondary};\r\n\t\t\t\t&--item{\r\n\t\t\t\t\tfont-size: ${props => props.theme.font.medium};\r\n\t\t\t\t\tfont-weight: 500;\r\n\t\t\t\t\talign-self: center ;\r\n\t\t\t\t\tcolor: ${props => props.theme.colorDark};\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t  }\r\n\r\n    }\r\n    img{\r\n      /* height: 100%; */\r\n      width: 80%;        \r\n    }\r\n\r\n    \r\n`\r\nfunction AdminOrders({ allHistory, fetchAllhistory }) {\r\n\t// const [token, setToken] = useState([])\r\n\tconst [fetchedHistory, setFetchedHistory] = useState(false)\r\n\tconst [popUpMessage, setPopUpMessage] = useState(null)\r\n\tconst [showpopUpMessage, setShowPopUpMessage] = useState(false)\r\n\tconst [hasError, setHasError] = useState(false)\r\n\r\n\r\n\t// let authToken\r\n\r\n\tuseEffect(() => {\r\n\t\tconst auth_token = Storage.get(\"userInfo\")?.user?.auth_token\r\n\t\t// console.log(auth_token);\r\n\r\n\t\tAxios.get(`${routes.api.adminGetOrders}?token=${auth_token}`)\r\n\t\t\t.then(response => {\r\n\t\t\t\t// console.log(response.data.data);\r\n\r\n\t\t\t\tfetchAllhistory(response.data.data)\r\n\t\t\t\treturn response.data;\r\n\t\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\tsetFetchedHistory(true)\r\n\t\t\t\t// console.log(allHistory)\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\t// alert(`An Error Occured! ${error}`);\r\n\t\t\t\tconsole.log(error);\r\n\t\t\t});\r\n\r\n\t}, [fetchAllhistory])\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\t// Make an expander cell\r\n\t\t\tHeader: () => null, // No header\r\n\t\t\tid: 'expander', // It needs an ID\r\n\t\t\tCell: ({ row }) => (\r\n\t\t\t\t// Use Cell to render an expander for each row.\r\n\t\t\t\t// We can use the getToggleRowExpandedProps prop-getter\r\n\t\t\t\t// to build the expander.\r\n\t\t\t\t<span {...row.getToggleRowExpandedProps()}>\r\n\t\t\t\t\t{row.isExpanded ? 'Close' : 'More '}\r\n\t\t\t\t</span>\r\n\t\t\t),\r\n\t\t},\r\n\t\t{\r\n\t\t\tHeader: 'Buy and Sell Orders',\r\n\t\t\tcolumns: [\r\n\t\t\t\t{\r\n\t\t\t\t\tHeader: 'Amount',\r\n\t\t\t\t\taccessor: 'amount',\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tHeader: 'Email',\r\n\t\t\t\t\taccessor: (rowInfo) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t{rowInfo?.user?.email || \"none\"}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tHeader: 'Type',\r\n\t\t\t\t\taccessor: 'type',\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tHeader: 'Status',\r\n\t\t\t\t\taccessor: 'status',\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tHeader: 'Transaction Id',\r\n\t\t\t\t\taccessor: 'reference_id',\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t},\r\n\t\t{\r\n\t\t\t// Make an expander cell\r\n\t\t\tHeader: () => null, // No header\r\n\t\t\tid: 'action', // It needs an ID\r\n\t\t\tCell: ({ row }) => (\r\n\t\t\t\t// Use Cell to render an expander for each row.\r\n\t\t\t\t// We can use the getToggleRowExpandedProps prop-getter\r\n\t\t\t\t// to build the expander.\r\n\r\n\t\t\t\t<div className=\"options_btn\">\r\n\t\t\t\t\t<StyledButton onClick={(e) => confirmTransaction(row.original.id)}>\r\n\t\t\t\t\t\tConfirm\r\n\t\t\t  </StyledButton>\r\n\r\n\t\t\t\t\t<StyledButton onClick={(e) => deleteOrder(row.original.id)}>\r\n\t\t\t\t\t\tDelete\r\n\t\t\t\t</StyledButton>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t),\r\n\t\t},\r\n\t]\r\n\r\n\tconst deleteOrder = (id) => {\r\n\t\t// console.log(user_id);\r\n\t\tconst auth_token = Storage.get(\"userInfo\").user.auth_token\r\n\r\n\t\tAxios.post(`${routes.api.adminDestroyOrder}?token=${auth_token}`, { id: id, action: \"delete\" })\r\n\t\t\t.then(res => {\r\n\t\t\t\tsetShowPopUpMessage(false)\r\n\t\t\t\tif (res.data.status === \"success\") {\r\n\t\t\t\t\tsetPopUpMessage(res.data.data[0])\r\n\t\t\t\t}\r\n\t\t\t\treturn res.data.data[1];\r\n\t\t\t\t// console.log(res.data);\r\n\t\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\tsetShowPopUpMessage(true)\r\n\t\t\t\tfetchAllhistory(res)\r\n\t\t\t})\r\n\t\t\t.catch(res => {\r\n\t\t\t\tsetPopUpMessage(res.data.data)\r\n\t\t\t\tsetShowPopUpMessage(true)\r\n\t\t\t})\r\n\t}\r\n\tconst expandedComponent = ({ original }) => (\r\n\t\t<div\r\n\t\t\tstyle={{\r\n\t\t\t\tfontSize: '10px',\r\n\t\t\t\twidth: \"100%\",\r\n\t\t\t\tdisplay: \"grid\",\r\n\t\t\t\t\"gridTemplateColumns\": \"1fr \",\r\n\t\t\t\toverflow: \"hidden\"\r\n\r\n\t\t\t}}\r\n\t\t\tclassName=\"orders\"\r\n\t\t>\r\n\t\t\t{/* {console.log(original)} */}\r\n\t\t\t<p className=\"orders-text\">\r\n\t\t\t\t{original?.user?.first_name}\r\n\t\t\t\t<span className=\"orders-text__info\">\r\n\t\t\t\t\t{original?.user?.phone_no}\r\n\t\t\t\t</span>\r\n\t\t\t\t<span className=\"orders-text__info\">\r\n\t\t\t\t\t{original?.user?.email}\r\n\t\t\t\t</span>\r\n\t\t\t</p>\r\n\r\n\t\t\t<p className=\"orders-text__tranction\">\r\n\t\t\t\t{original?.amount}\r\n\t\t\t\t<span className=\"orders-text__tranction--item\">\r\n\t\t\t\t\t{original?.type}\r\n\t\t\t\t</span>\r\n\t\t\t\t<span className=\"orders-text__tranction--item\">\r\n\t\t\t\t\t{original?.status}\r\n\t\t\t\t</span>\r\n\t\t\t\t<span className=\"orders-text__tranction--item\">\r\n\t\t\t\t\t{original?.reference_id}\r\n\t\t\t\t</span>\r\n\t\t\t\t<span className=\"orders-text__tranction--item\">\r\n\t\t\t\t\t{new Date(original?.created_at).toDateString()}\r\n\t\t\t\t</span>\r\n\t\t\t\t<span className=\"orders-text__tranction--item\">\r\n\t\t\t\t\t{original?.image ? <a  href={routes.api.getImage + `${original?.image}`}> View image </a> : null}\r\n\t\t\t\t</span>\r\n\t\t\t</p>\r\n\r\n\r\n\t\t</div>\r\n\t)\r\n\tconst confirmTransaction = (id) => {\r\n\t\t// console.log();\r\n\t\tconst auth_token = Storage.get(\"userInfo\").user.auth_token\r\n\t\tconst data = {\r\n\t\t\tid: id,\r\n\t\t}\r\n\t\tconsole.log(data);\r\n\t\tAxios.post(`${routes.api.adminConfirmTransaction}?token=${auth_token}`, data)\r\n\t\t\t.then(res => {\r\n\t\t\t\tsetShowPopUpMessage(false)\r\n\t\t\t\tif (res.data.status === \"success\") {\r\n\t\t\t\t\tsetHasError(false)\r\n\t\t\t\t\tsetPopUpMessage(res.data.data[0])\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetPopUpMessage(res.data.data)\r\n\t\t\t\t\tsetHasError(true)\r\n\t\t\t\t}\r\n\t\t\t\treturn res.data.data[1];\r\n\t\t\t\t// console.log(res.data);\r\n\t\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\tsetShowPopUpMessage(true)\r\n\t\t\t\tfetchAllhistory(res)\r\n\t\t\t})\r\n\t\t// .catch(res => {\r\n\t\t// \tsetPopUpMessage(res.data.data)\r\n\t\t// \tsetShowPopUpMessage(true)\r\n\t\t// })\r\n\t}\r\n\treturn (\r\n\t\t<Container color=\"\">\r\n\t\t\t<div className=\"rate\">\r\n\t\t\t\t{showpopUpMessage ? <PopUpMessage error={hasError}> {popUpMessage} <span onClick={() => setShowPopUpMessage(false)}>✖</span> </PopUpMessage> : null}\r\n\t\t\t\t{/* <h1 className=\"rate__title\">All Orders</h1> */}\r\n\t\t\t\t{fetchedHistory ? <Table data={allHistory.history || []} expandedComponent={expandedComponent} handleVerifyClick={confirmTransaction} tableColumns={columns} /> : null}\r\n\t\t\t\t{/* <Table tableColumns={columns} /> */}\r\n\t\t\t</div>\r\n\t\t</Container>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = ({ history }) => ({\r\n\tallHistory: history\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n\tfetchAllhistory: fetchAllHistoryActionCreator\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(AdminOrders)\r\n"],"sourceRoot":""}