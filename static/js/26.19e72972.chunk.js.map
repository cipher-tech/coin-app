{"version":3,"sources":["pages/masterAdmin/users/users.jsx"],"names":["Container","styled","div","props","theme","colorLight","breakPoints","bpSmall2","colorPrimary","mapDispatchToProps","fetchAllUsers","fetchAllUsersActionCreator","connect","allUsers","users","useState","fetchedUsers","setFetchedUsers","editRole","setEditRole","editWallet_bal","setEditWallet_bal","useEffect","auth_token","JSON","parse","localStorage","getItem","user","Axios","get","then","response","data","res","catch","error","alert","columns","Header","id","Cell","row","getToggleRowExpandedProps","isExpanded","accessor","collapse","updateFormValue","name","value","updateEditRateHooks","className","expandedComponent","onBlur","console","log","toggleRowExpanded","label","updatedValue","handleChange","placeHolder","type","icon","envelope","original","wallet_balc","onClick","userInfo","userId","role","wallet_bal","post","routes","api","updateUsers","handleEditRates","tableColumns"],"mappings":"u/CAcA,IAAMA,EAAYC,IAAOC,IAAV,KAMG,SAAAC,GAAK,OAAIA,EAAMC,MAAMC,cAYI,SAAAF,GAAK,OAAIA,EAAMC,MAAME,YAAYC,YAmB3D,SAAAJ,GAAK,OAAIA,EAAMC,MAAMI,gBAWd,SAAAL,GAAK,OAAIA,EAAMC,MAAMI,gBA4I7C,IAIMC,EAAqB,CAC1BC,cAAeC,KAGDC,uBARS,SAAC,GAAD,MAAgB,CACvCC,SADuB,EAAGC,SAQaL,EAAzBG,EA9If,YAAkD,IAA5BC,EAA2B,EAA3BA,SAAUH,EAAiB,EAAjBA,cAAiB,EAERK,oBAAS,GAFD,mBAEzCC,EAFyC,KAE3BC,EAF2B,OAGhBF,mBAAS,IAHO,mBAGzCG,EAHyC,KAG/BC,EAH+B,OAIJJ,mBAAS,IAJL,mBAIzCK,EAJyC,KAIzBC,EAJyB,KAQhDC,qBAAU,WACT,IAAMC,EAAaC,KAAKC,MAAMC,aAAaC,QAAQ,aAAaC,KAAKL,WAGrEM,IAAMC,IAAN,oDAAuDP,IACrDQ,MAAK,SAAAC,GAIL,OADAtB,EAAcsB,EAASC,KAAKA,MACrBD,EAASC,QAEhBF,MAAK,SAAAG,GACLjB,GAAgB,MAGhBkB,OAAM,SAAAC,GACNC,MAAM,qBAAD,OAAsBD,SAG3B,CAAC1B,IACJ,IAAM4B,EAAU,CACf,CAECC,OAAQ,kBAAM,MACdC,GAAI,WAEJC,KAAM,gBAAGC,EAAH,EAAGA,IAAH,OAIL,wBAASA,EAAIC,4BACXD,EAAIE,WAAa,eAAY,UAQjC,CACCL,OAAQ,aACRM,SAAU,cAEX,CACCN,OAAQ,QACRM,SAAU,SAEX,CACCN,OAAQ,OACRM,SAAU,OACVC,UAAU,GAEX,CACCP,OAAQ,WACRM,SAAU,WACVC,UAAU,GAEX,CACCP,OAAQ,cACRM,SAAU,cACVC,UAAU,GAEX,CACCP,OAAQ,SACRM,SAAU,UAEX,CACCN,OAAQ,aACRM,SAAU,aACVC,UAAU,IAqBNC,EAAkB,SAACC,EAAMC,KAIzBC,EAAsB,WAC3B/B,EAAY,IACZE,EAAkB,KAmBnB,OACC,kBAACrB,EAAD,KACC,yBAAKmD,UAAU,QACd,wBAAIA,UAAU,eAAd,aACCnC,EAAe,kBAAC,IAAD,CAAOoC,kBArBA,SAACjD,GAAD,OACzB,yBAAKgD,UAAU,cAAcE,OAAQ,WAAQC,QAAQC,IAAIpD,GAAQA,EAAMqD,kBAAkBrD,EAAMqC,IAAI,KAClG,kBAAC,IAAD,CAAaQ,KAAK,OAAOS,MAAM,OAAOC,aAAcvC,EACnDwC,aAAcZ,EAAiBE,MAAO/B,EACtC0C,YAAY,cAAcC,KAAK,cAAcC,KAAMC,MAEpD,kBAAC,IAAD,CAAaf,KAAK,SAASS,MAAM,iBAAiBC,aAAcrC,EAC/DsC,aAAcZ,EAAiBE,MAAO9C,EAAM6D,SAASC,YACrDL,YAAY,kBAAkBC,KAAK,SAASC,KAAMC,MAEnD,4BAAQG,QAAS,kBAnCK,SAACtC,GACxB,IAAMuC,EAAW,CAChBC,OAAQxC,EAAKY,GACb6B,KAAMnD,GAAYU,EAAKyC,KACvBC,WAAYlD,GAAkBQ,EAAKqC,aAGpCX,QAAQC,IAAIY,GACZjB,IAEArB,IAAM0C,KAAKC,IAAOC,IAAIC,YAAaP,GACjCpC,MAAK,SAAAG,GACLoB,QAAQC,IAAIrB,EAAID,MAChBvB,EAAcwB,EAAID,KAAKA,SAsBD0C,CAAgBxE,EAAM6D,WAAWb,UAAU,uBAAlE,YAW8DlB,KAAMpB,EAASA,SAAU+D,aAActC,IAAc","file":"static/js/26.19e72972.chunk.js","sourcesContent":["import React from 'react'\r\nimport styled from 'styled-components'\r\n// import rateImage from \"../../../images/rate.png\"\r\n// import Table from './table'\r\nimport Table from '../../../components/table/tablePagination'\r\nimport { fetchAllUsersActionCreator } from '../../../reduxStore/user'\r\nimport { connect } from 'react-redux'\r\nimport { useEffect } from 'react'\r\nimport Axios from 'axios'\r\nimport { useState } from 'react'\r\nimport { StyledInput } from '../../../components/styledComponents'\r\nimport envelope from \"../../../images/svgIcons/envelope.svg\"\r\nimport routes from '../../../navigation/routes'\r\n\r\nconst Container = styled.div`\r\n    grid-column: 2/-1;\r\n    display: grid;\r\n    min-height: 100%;\r\n    min-width: 100%;\r\n    align-items: flex-start;\r\n    background: ${props => props.theme.colorLight};\r\n    border-radius: 2rem 0 0 2rem;\r\n    z-index: 30;\r\n    .rate{\r\n      grid-column: 1/-1;\r\n      display: grid;\r\n      width: 100%;\r\n      padding: 3rem;\r\n      /* place-items: center; */\r\n      justify-items: center;\r\n      align-items: space-around;\r\n\t  justify-self: flex-start;\r\n      @media only screen and (max-width: ${props => props.theme.breakPoints.bpSmall2}) {\r\n        padding: 3rem 0;\r\n      }\r\n\t  .expandedDiv{\r\n\t\t  color: red; \r\n\t\t  width: 100%;\r\n\t\t  display: grid;\r\n\t\t  justify-items: space-around;\r\n\t\t  grid-template-columns: repeat(3, 1fr);\r\n\t\t  gap: 0 1.5rem;\r\n\t\t  &__button{\r\n\t\t\talign-self: center;\r\n\t\t\tborder-radius: 1rem;\r\n\t\t\tpadding: 1.5rem 1.5rem;\r\n\t\t  }\r\n\t  }\r\n      &__title{   \r\n        justify-self: flex-start;\r\n        font-weight: 500;\r\n        color: ${props => props.theme.colorPrimary};\r\n        font-family: ProximaNovaSoftW03-Regular;\r\n        position: relative;\r\n\r\n        &::after{\r\n          content: '';\r\n          position: absolute;\r\n          width: 120%;\r\n          height: .4rem;\r\n          bottom: 0;\r\n          left: 0;\r\n          background: ${props => props.theme.colorPrimary};\r\n        }\r\n      }\r\n    }\r\n    \r\n`\r\nfunction AdminUsers({ allUsers, fetchAllUsers }) {\r\n\t// const [token, setToken] = useState([])\r\n\tconst [fetchedUsers, setFetchedUsers] = useState(false)\r\n\tconst [editRole, setEditRole] = useState('')\r\n\tconst [editWallet_bal, setEditWallet_bal] = useState('')\r\n\r\n\t// let authToken\r\n\r\n\tuseEffect(() => {\r\n\t\tconst auth_token = JSON.parse(localStorage.getItem(\"userInfo\")).user.auth_token\r\n\t\t// console.log(auth_token);\r\n\r\n\t\tAxios.get(`http://localhost:8000/api/users/all?token=${auth_token}`)\r\n\t\t\t.then(response => {\r\n\t\t\t\t// console.log(response.data);\r\n\r\n\t\t\t\tfetchAllUsers(response.data.data)\r\n\t\t\t\treturn response.data;\r\n\t\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\tsetFetchedUsers(true)\r\n\t\t\t\t// console.log(allUsers)\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\talert(`An Error Occured! ${error}`);\r\n\t\t\t});\r\n\r\n\t}, [fetchAllUsers])\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\t// Make an expander cell\r\n\t\t\tHeader: () => null, // No header\r\n\t\t\tid: 'expander', // It needs an ID\r\n\r\n\t\t\tCell: ({ row }) => (\r\n\t\t\t\t// Use Cell to render an expander for each row.\r\n\t\t\t\t// We can use the getToggleRowExpandedProps prop-getter\r\n\t\t\t\t// to build the expander.\r\n\t\t\t\t<div {...row.getToggleRowExpandedProps()}>\r\n\t\t\t\t\t{row.isExpanded ? 'cancle‚ùå' : 'Edit'}\r\n\r\n\t\t\t\t\t{/* <div onClick={ ()=>row.toggleRowExpanded( row.id,false)}>\r\n\t\t\t\t\tclose\r\n\t\t\t\t</div> */}\r\n\t\t\t\t</div>\r\n\t\t\t),\r\n\t\t},\r\n\t\t{\r\n\t\t\tHeader: 'First Name',\r\n\t\t\taccessor: 'first_name',\r\n\t\t},\r\n\t\t{\r\n\t\t\tHeader: 'Email',\r\n\t\t\taccessor: 'email',\r\n\t\t},\r\n\t\t{\r\n\t\t\tHeader: 'Role',\r\n\t\t\taccessor: 'role',\r\n\t\t\tcollapse: true,\r\n\t\t},\r\n\t\t{\r\n\t\t\tHeader: 'phone No',\r\n\t\t\taccessor: 'phone_no',\r\n\t\t\tcollapse: true,\r\n\t\t},\r\n\t\t{\r\n\t\t\tHeader: 'Wallet Balc',\r\n\t\t\taccessor: 'wallet_balc',\r\n\t\t\tcollapse: true,\r\n\t\t},\r\n\t\t{\r\n\t\t\tHeader: 'Status',\r\n\t\t\taccessor: 'status',\r\n\t\t},\r\n\t\t{\r\n\t\t\tHeader: 'created At',\r\n\t\t\taccessor: 'created_at',\r\n\t\t\tcollapse: true,\r\n\t\t},\r\n\r\n\t]\r\n\tconst handleEditRates = (user) => {\r\n\t\tconst userInfo = {\r\n\t\t\tuserId: user.id,\r\n\t\t\trole: editRole || user.role,\r\n\t\t\twallet_bal: editWallet_bal || user.wallet_balc\r\n\t\t}\r\n\r\n\t\tconsole.log(userInfo);\r\n\t\tupdateEditRateHooks()\r\n\r\n\t\tAxios.post(routes.api.updateUsers, userInfo)\r\n\t\t\t.then(res => {\r\n\t\t\t\tconsole.log(res.data);\r\n\t\t\t\tfetchAllUsers(res.data.data)\r\n\t\t\t})\r\n\t}\r\n\r\n\tconst updateFormValue = (name, value) => {\r\n\r\n\t}\r\n\r\n\tconst updateEditRateHooks = () => {\r\n\t\tsetEditRole('')\r\n\t\tsetEditWallet_bal('')\r\n\t}\r\n\tconst expandedComponent = (props) => (\r\n\t\t<div className=\"expandedDiv\" onBlur={() => { console.log(props); props.toggleRowExpanded(props.id, !true) }}>\r\n\t\t\t<StyledInput name=\"Role\" label=\"Role\" updatedValue={setEditRole}\r\n\t\t\t\thandleChange={updateFormValue} value={editRole}\r\n\t\t\t\tplaceHolder=\"Change Role\" type=\"currentRate\" icon={envelope} />\r\n\r\n\t\t\t<StyledInput name=\"buying\" label=\"Wallet balance\" updatedValue={setEditWallet_bal}\r\n\t\t\t\thandleChange={updateFormValue} value={props.original.wallet_balc}\r\n\t\t\t\tplaceHolder=\"Edit wallet bal\" type=\"buying\" icon={envelope} />\r\n\r\n\t\t\t<button onClick={() => handleEditRates(props.original)} className=\"expandedDiv__button\">\r\n\t\t\t\tUpdate\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t)\r\n\t// console.log(fetchedUsers);\r\n\t// console.log(token);\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<div className=\"rate\">\r\n\t\t\t\t<h1 className=\"rate__title\">All Users</h1>\r\n\t\t\t\t{fetchedUsers ? <Table expandedComponent={expandedComponent} data={allUsers.allUsers} tableColumns={columns} /> : null}\r\n\t\t\t\t{/* <Table tableColumns={columns} /> */}\r\n\t\t\t</div>\r\n\t\t</Container>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = ({ users }) => ({\r\n\tallUsers: users\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n\tfetchAllUsers: fetchAllUsersActionCreator\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(AdminUsers)\r\n"],"sourceRoot":""}