{"version":3,"sources":["pages/masterAdmin/verify/verifyUsers.jsx"],"names":["Container","styled","div","props","theme","colorLight","breakPoints","bpSmall2","colorPrimary","mapDispatchToProps","fetchAllUsers","fetchAllUsersActionCreator","connect","allUsers","users","useState","fetchedUsers","setFetchedUsers","popUpMessage","setPopUpMessage","showpopUpMessage","setShowPopUpMessage","useEffect","auth_token","JSON","parse","localStorage","getItem","user","console","log","Axios","get","then","response","data","res","catch","error","alert","columns","Header","id","Cell","row","getToggleRowExpandedProps","isExpanded","accessor","className","onClick","e","verify","original","user_id","deleteVerification","post","routes","api","deleteUnverifirdUsers","verifyId","action","status","verifyUsers","color","expandedComponent","style","fontSize","height","width","display","overflow","images","Object","values","map","photo","i","key","src","getImage","alt","handleVerifyClick","tableColumns"],"mappings":"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","file":"static/js/27.e76de0e8.chunk.js","sourcesContent":["import React from 'react'\r\nimport styled from 'styled-components'\r\n// import rateImage from \"../../../images/rate.png\"\r\n// import Table from './table'\r\nimport Table from '../../../components/table/tablePagination'\r\nimport { fetchAllUsersActionCreator } from '../../../reduxStore/user'\r\nimport { connect } from 'react-redux'\r\nimport { useEffect } from 'react'\r\nimport Axios from 'axios'\r\nimport { useState } from 'react'\r\nimport routes from '../../../navigation/routes'\r\nimport { StyledButton, PopUpMessage } from '../../../components'\r\n\r\n\r\nconst Container = styled.div`\r\n    grid-column: 2/-1;\r\n    display: grid;\r\n    min-height: 100%;\r\n    min-width: 100%;\r\n    align-items: flex-start;\r\n    background: ${props => props.theme.colorLight};\r\n    border-radius: 2rem 0 0 2rem;\r\n    z-index: 30;\r\n    .rate{\r\n\t\tgrid-column: 1/-1;\r\n\t\tdisplay: grid;\r\n\t\twidth: 100%;\r\n\t\tpadding: 3rem;\r\n\t\t/* place-items: center; */\r\n\t\tjustify-items: center;\r\n\t\talign-items: space-around;\r\n\t\tjustify-self: flex-start;\r\n\t\tposition: relative;\r\n\t\t@media only screen and (max-width: ${props => props.theme.breakPoints.bpSmall2}) {\r\n\t\t\tpadding: 3rem 0;\r\n\t\t}\r\n\t\t\r\n      &__title{   \r\n        justify-self: flex-start;\r\n        font-weight: 500;\r\n        color: ${props => props.theme.colorPrimary};\r\n        font-family: ProximaNovaSoftW03-Regular;\r\n        position: relative;\r\n\r\n        &::after{\r\n          content: '';\r\n          position: absolute;\r\n          width: 120%;\r\n          height: .4rem;\r\n          bottom: 0;\r\n          left: 0;\r\n          background: ${props => props.theme.colorPrimary};\r\n        }\r\n      }\r\n    }\r\n    img{\r\n      /* height: 100%; */\r\n      width: 80%;        \r\n    }\r\n\r\n\r\n    \r\n`\r\nfunction AdminVerifyUsers({ allUsers, fetchAllUsers }) {\r\n\t// const [token, setToken] = useState([])\r\n\tconst [fetchedUsers, setFetchedUsers] = useState(false)\r\n\tconst [popUpMessage, setPopUpMessage] = useState(null)\r\n\tconst [showpopUpMessage, setShowPopUpMessage] = useState(false)\r\n\r\n\r\n\t// let authToken\r\n\r\n\tuseEffect(() => {\r\n\t\tconst auth_token = JSON.parse(localStorage.getItem(\"userInfo\")).user.auth_token\r\n\t\tconsole.log(auth_token);\r\n\r\n\t\tAxios.get(`http://localhost:8000/api/users/unverified?token=${auth_token}`)\r\n\t\t\t.then(response => {\r\n\t\t\t\t// console.log(response.data);\r\n\r\n\t\t\t\tfetchAllUsers(response.data.data)\r\n\t\t\t\treturn response.data;\r\n\t\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\tsetFetchedUsers(true)\r\n\t\t\t\t// console.log(allUsers)\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\talert(`An Error Occured! ${error}`);\r\n\t\t\t});\r\n\r\n\t}, [fetchAllUsers])\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\t// Make an expander cell\r\n\t\t\tHeader: () => null, // No header\r\n\t\t\tid: 'expander', // It needs an ID\r\n\t\t\tCell: ({ row }) => (\r\n\t\t\t\t// Use Cell to render an expander for each row.\r\n\t\t\t\t// We can use the getToggleRowExpandedProps prop-getter\r\n\t\t\t\t// to build the expander.\r\n\t\t\t\t<span {...row.getToggleRowExpandedProps()}>\r\n\t\t\t\t\t{row.isExpanded ? 'ðŸ‘‡' : 'ðŸ‘‰'}\r\n\t\t\t\t</span>\r\n\t\t\t),\r\n\t\t},\r\n\t\t{\r\n\t\t\tHeader: 'Unverified Users',\r\n\t\t\tcolumns: [\r\n\t\t\t\t{\r\n\t\t\t\t\tHeader: 'ID',\r\n\t\t\t\t\taccessor: 'id',\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tHeader: 'email',\r\n\t\t\t\t\taccessor: 'email',\r\n\t\t\t\t},\r\n\t\t\t\t// {\r\n\t\t\t\t// \tHeader: '',\r\n\t\t\t\t// \taccessor: 'images',\r\n\t\t\t\t// },\r\n\t\t\t\t{\r\n\t\t\t\t\tHeader: 'status',\r\n\t\t\t\t\taccessor: 'status',\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t},\r\n\t\t{\r\n\t\t\t// Make an expander cell\r\n\t\t\tHeader: () => null, // No header\r\n\t\t\tid: 'action', // It needs an ID\r\n\t\t\tCell: ({ row }) => (\r\n\t\t\t\t// Use Cell to render an expander for each row.\r\n\t\t\t\t// We can use the getToggleRowExpandedProps prop-getter\r\n\t\t\t\t// to build the expander.\r\n\t\t\t\t<div className=\"options_btn\">\r\n\t\t\t\t\t<StyledButton onClick={(e) => verify(row.original.user_id, row.original.id)}>\r\n\t\t\t\t\t\tVerify\r\n\t\t\t  \t\t</StyledButton>\r\n\r\n\t\t\t\t\t<StyledButton onClick={(e) => deleteVerification(row.original.id)}>\r\n\t\t\t\t\t\tDelete\r\n\t\t\t  \t\t</StyledButton>\r\n\t\t\t\t</div>\r\n\t\t\t),\r\n\t\t},\r\n\t]\r\n\r\n\tconst deleteVerification = (id) => {\r\n\t\t// console.log(user_id);\r\n\t\tconst auth_token = JSON.parse(localStorage.getItem(\"userInfo\")).user.auth_token\r\n\r\n\t\tAxios.post(`${routes.api.deleteUnverifirdUsers}?token=${auth_token}`, {verifyId: id, action: \"delete\" })\r\n\t\t\t.then(res => {\r\n\t\t\t\tsetShowPopUpMessage(false)\r\n\t\t\t\tif (res.data.status === \"success\") {\r\n\t\t\t\t\tsetPopUpMessage(res.data.data[0])\r\n\t\t\t\t}\r\n\t\t\t\treturn res.data.data[1];\r\n\t\t\t\t// console.log(res.data);\r\n\t\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\tsetShowPopUpMessage(true)\r\n\t\t\t\tfetchAllUsers(res)\r\n\t\t\t})\r\n\t\t\t.catch(res => {\r\n\t\t\t\tsetPopUpMessage(res.data.data)\r\n\t\t\t\tsetShowPopUpMessage(true)\r\n\t\t\t})\r\n\t}\r\n\tconst expandedComponent = (row) => (\r\n\t\t<div\r\n\t\t\tstyle={{\r\n\t\t\t\tfontSize: '10px',\r\n\t\t\t\theight: \"20rem\",\r\n\t\t\t\twidth: \"100%\",\r\n\t\t\t\tdisplay: \"grid\",\r\n\t\t\t\t\"gridTemplateColumns\": \"1fr 1fr 1fr\",\r\n\t\t\t\toverflow: \"hidden\"\r\n\r\n\t\t\t}}\r\n\t\t>\r\n\t\t{console.log(row.original.images)}\r\n\t\t\t{/* <code>{JSON.stringify({ values: row.values.images }, null, 2)}</code> */}\r\n\t\t\t{Object.values(JSON.parse(row.original.images)).map((photo, i) => (\r\n\t\t\t\t<img key={i} src={routes.api.getImage + `${photo}`} alt=\"verify info\" />\r\n\t\t\t))}\r\n\t\t</div>\r\n\t)\r\n\tconst verify = (user_id, id) => {\r\n\t\tconsole.log(user_id);\r\n\t\tconst auth_token = JSON.parse(localStorage.getItem(\"userInfo\")).user.auth_token\r\n\r\n\t\tAxios.post(`${routes.api.verifyUsers}?token=${auth_token}`, { user_id: +user_id, verifyId: id, action: \"verify\" })\r\n\t\t\t.then(res => {\r\n\t\t\t\tsetShowPopUpMessage(false)\r\n\t\t\t\tif (res.data.status === \"success\") {\r\n\t\t\t\t\tsetPopUpMessage(res.data.data[0])\r\n\t\t\t\t}\r\n\t\t\t\treturn res.data.data[1];\r\n\t\t\t\t// console.log(res.data);\r\n\t\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\tsetShowPopUpMessage(true)\r\n\t\t\t\tfetchAllUsers(res)\r\n\t\t\t})\r\n\t\t\t.catch(res => {\r\n\t\t\t\tsetPopUpMessage(res.data.data)\r\n\t\t\t\tsetShowPopUpMessage(true)\r\n\t\t\t})\r\n\t}\r\n\treturn (\r\n\t\t<Container color=\"\">\r\n\t\t\t<div className=\"rate\">\r\n\t\t\t\t{showpopUpMessage ? <PopUpMessage> {popUpMessage} <span onClick={() => setShowPopUpMessage(false)}>âœ–</span> </PopUpMessage> : null}\r\n\t\t\t\t<h1 className=\"rate__title\">Verify Users</h1>\r\n\t\t\t\t{fetchedUsers ? <Table data={allUsers.allUsers || []} expandedComponent={expandedComponent} handleVerifyClick={verify} tableColumns={columns} /> : null}\r\n\t\t\t\t{/* <Table tableColumns={columns} /> */}\r\n\t\t\t</div>\r\n\t\t</Container>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = ({ users }) => ({\r\n\tallUsers: users\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n\tfetchAllUsers: fetchAllUsersActionCreator\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(AdminVerifyUsers)\r\n"],"sourceRoot":""}